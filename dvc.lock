schema: '2.0'
stages:
  get_imputation_config:
    cmd: python3 scripts/get_imputation_config.py --train_data processed_data/full_train_data.csv
      --config_output artifacts/imputation_config.json
    deps:
    - path: processed_data/full_train_data.csv
      hash: md5
      md5: 68e07f7429eae2dbe63d1220c8b1829f
      size: 20247042
    - path: scripts/get_imputation_config.py
      hash: md5
      md5: 74366a1465361a920a04849a5fcb167f
      size: 1324
    outs:
    - path: artifacts/imputation_config.json
      hash: md5
      md5: 12fe779fccee66ff81be04259b83bb8a
      size: 1087
  impute_data:
    cmd: python3 scripts/impute_data.py --data processed_data/full_train_data.csv
      --imput_config artifacts/imputation_config.json --output processed_data/full_train_data_imp.csv
    deps:
    - path: artifacts/imputation_config.json
      hash: md5
      md5: 12fe779fccee66ff81be04259b83bb8a
      size: 1087
    - path: processed_data/full_train_data.csv
      hash: md5
      md5: 68e07f7429eae2dbe63d1220c8b1829f
      size: 20247042
    - path: scripts/impute_data.py
      hash: md5
      md5: da42174716b4580af0059eba4e62fd9a
      size: 895
    outs:
    - path: processed_data/full_train_data_imp.csv
      hash: md5
      md5: 33a4e6c11b741441f26fe76a92202e82
      size: 23860786
  get_handcraft_features:
    cmd: python3 scripts/build_handcraft_features.py --input_path processed_data/full_train_data_imp.csv
      --output_path features_crafted/handcrafted_features.csv
    deps:
    - path: processed_data/full_train_data_imp.csv
      hash: md5
      md5: 33a4e6c11b741441f26fe76a92202e82
      size: 23860786
    - path: scripts/build_handcraft_features.py
      hash: md5
      md5: 49696d0f079797ff4ad5ac9b272982e6
      size: 2146
    outs:
    - path: features_crafted/handcrafted_features.csv
      hash: md5
      md5: 8d28dba9065e1b4553ba3a1580ff635e
      size: 18777114
  aggregate_transactions:
    cmd: python3 scripts/aggregate_user_transactions.py --input_path sampled_data/transactions_sample.csv
      --output_dir processed_data/
    deps:
    - path: sampled_data/transactions_sample.csv
      hash: md5
      md5: 6c96884613d3767f66381236a51bf192
      size: 9953314
    - path: scripts/aggregate_user_transactions.py
      hash: md5
      md5: 5172204525343dd3acf027ddb0e13c4f
      size: 2311
    outs:
    - path: processed_data/aggregated_transactions.csv
      hash: md5
      md5: c5b782898cde2619ee89e22c770c3066
      size: 32952291
  aggregate_logs:
    cmd: python3 scripts/aggregate_user_logs.py --input_path sampled_data/user_logs_sample.csv
      --output_dir processed_data/
    deps:
    - path: sampled_data/user_logs_sample.csv
      hash: md5
      md5: aa5a26707dee837a6206574caa3ccea6
      size: 115045803
    - path: scripts/aggregate_user_logs.py
      hash: md5
      md5: 28c95250c4b0951ef9bebcfb12fe4fc5
      size: 1728
    outs:
    - path: processed_data/aggregated_logs.csv
      hash: md5
      md5: f331060f82131917ed321f51db4f2bfa
      size: 25607128
  merge_all_tables:
    cmd: python3 scripts/merge_users_info.py --members_path sampled_data/members_sample.csv
      --agg_logs_path processed_data/aggregated_logs.csv --agg_transactions_path processed_data/aggregated_transactions.csv
      --output_dir processed_data/
    deps:
    - path: processed_data/aggregated_logs.csv
      hash: md5
      md5: f331060f82131917ed321f51db4f2bfa
      size: 25607128
    - path: processed_data/aggregated_transactions.csv
      hash: md5
      md5: c5b782898cde2619ee89e22c770c3066
      size: 32952291
    - path: sampled_data/members_sample.csv
      hash: md5
      md5: 14a9e051d1fb0500cf67d0bf4e2546d5
      size: 6177626
    - path: scripts/merge_users_info.py
      hash: md5
      md5: fe87e24f79d3cb01118bde7cf7efed11
      size: 1504
    outs:
    - path: processed_data/users_data_merged.csv
      hash: md5
      md5: b0e1c60e4929dea6126847437a7d1ec1
      size: 53934102
  build_train_data:
    cmd: python3 scripts/build_train_data.py --merged_data_path processed_data/users_data_merged.csv
      --train_labels_path sampled_data/train_v2.csv --output_dir processed_data/
    deps:
    - path: processed_data/users_data_merged.csv
      hash: md5
      md5: b0e1c60e4929dea6126847437a7d1ec1
      size: 53934102
    - path: sampled_data/train_v2.csv
      hash: md5
      md5: 2b2053237787f2a93402561a3e96e4a7
      size: 45635134
    - path: scripts/build_train_data.py
      hash: md5
      md5: 5d01bc7cc36a87e1085c22af5b41063d
      size: 786
    outs:
    - path: processed_data/full_train_data.csv
      hash: md5
      md5: 68e07f7429eae2dbe63d1220c8b1829f
      size: 20247042
