schema: '2.0'
stages:
  get_imputation_config:
    cmd: python3 scripts/get_imputation_config.py --train_data processed_data/full_train_data.csv
      --config_output artifacts/imputation_config.json
    deps:
    - path: processed_data/full_train_data.csv
      hash: md5
      md5: 0e347e64abd8415a8f15345b7b396264
      size: 19415476
    - path: scripts/get_imputation_config.py
      hash: md5
      md5: 74366a1465361a920a04849a5fcb167f
      size: 1324
    outs:
    - path: artifacts/imputation_config.json
      hash: md5
      md5: b68d2ce4ab9afcb367cb8c2dc202c618
      size: 2075
  impute_data:
    cmd: python3 scripts/impute_data.py --data processed_data/full_train_data.csv
      --imput_config artifacts/imputation_config.json --output processed_data/full_train_data_imp.csv
    deps:
    - path: artifacts/imputation_config.json
      hash: md5
      md5: b68d2ce4ab9afcb367cb8c2dc202c618
      size: 2075
    - path: processed_data/full_train_data.csv
      hash: md5
      md5: 0e347e64abd8415a8f15345b7b396264
      size: 19415476
    - path: scripts/impute_data.py
      hash: md5
      md5: da42174716b4580af0059eba4e62fd9a
      size: 895
    outs:
    - path: processed_data/full_train_data_imp.csv
      hash: md5
      md5: aa2b42c28729d047e5b5597ec989ddd1
      size: 35889736
  get_handcraft_features:
    cmd: python3 scripts/build_handcraft_features.py --input_path processed_data/full_train_data_imp.csv
      --output_path features_crafted/handcrafted_features.csv
    deps:
    - path: processed_data/full_train_data_imp.csv
      hash: md5
      md5: aa2b42c28729d047e5b5597ec989ddd1
      size: 35889736
    - path: scripts/build_handcraft_features.py
      hash: md5
      md5: 2c5c314fb0390ef1a4247d6d5c1eca67
      size: 2891
    outs:
    - path: features_crafted/handcrafted_features.csv
      hash: md5
      md5: 07017c1ffbb88d6d3fa182f47d9c148e
      size: 15570299
  aggregate_transactions:
    cmd: python3 scripts/aggregate_user_transactions.py --input_path sampled_data/transactions_sample.csv
      --output_dir processed_data/
    deps:
    - path: sampled_data/transactions_sample.csv
      hash: md5
      md5: 6c96884613d3767f66381236a51bf192
      size: 9953314
    - path: scripts/aggregate_user_transactions.py
      hash: md5
      md5: 241da7e76138e215249dc2ac7189adde
      size: 4318
    outs:
    - path: processed_data/aggregated_transactions.csv
      hash: md5
      md5: b14d666b365cb5cd146195996cd5fc87
      size: 11875263
  aggregate_logs:
    cmd: python3 scripts/aggregate_user_logs.py --input_path sampled_data/user_logs_sample.csv
      --output_dir processed_data/
    deps:
    - path: sampled_data/user_logs_sample.csv
      hash: md5
      md5: aa5a26707dee837a6206574caa3ccea6
      size: 115045803
    - path: scripts/aggregate_user_logs.py
      hash: md5
      md5: 32f57f7cfb140a5977c4c83af47bc209
      size: 2373
    outs:
    - path: processed_data/aggregated_logs.csv
      hash: md5
      md5: 4f66e28ad68499bbba8c7dc122db671b
      size: 10643431
  merge_all_tables:
    cmd: python3 scripts/merge_users_info.py --members_path sampled_data/members_sample.csv
      --agg_logs_path processed_data/aggregated_logs.csv --agg_transactions_path processed_data/aggregated_transactions.csv
      --output_dir processed_data/
    deps:
    - path: processed_data/aggregated_logs.csv
      hash: md5
      md5: 4f66e28ad68499bbba8c7dc122db671b
      size: 10643431
    - path: processed_data/aggregated_transactions.csv
      hash: md5
      md5: b14d666b365cb5cd146195996cd5fc87
      size: 11875263
    - path: sampled_data/members_sample.csv
      hash: md5
      md5: 14a9e051d1fb0500cf67d0bf4e2546d5
      size: 6177626
    - path: scripts/merge_users_info.py
      hash: md5
      md5: fe87e24f79d3cb01118bde7cf7efed11
      size: 1504
    outs:
    - path: processed_data/users_data_merged.csv
      hash: md5
      md5: 6aa1082c4036e646915e506602c95e4f
      size: 79569239
  build_train_data:
    cmd: python3 scripts/build_train_data.py --merged_data_path processed_data/users_data_merged.csv
      --train_labels_path sampled_data/train_v2.csv --output_dir processed_data/
    deps:
    - path: processed_data/users_data_merged.csv
      hash: md5
      md5: 6aa1082c4036e646915e506602c95e4f
      size: 79569239
    - path: sampled_data/train_v2.csv
      hash: md5
      md5: 2b2053237787f2a93402561a3e96e4a7
      size: 45635134
    - path: scripts/build_train_data.py
      hash: md5
      md5: 5d01bc7cc36a87e1085c22af5b41063d
      size: 786
    outs:
    - path: processed_data/full_train_data.csv
      hash: md5
      md5: 0e347e64abd8415a8f15345b7b396264
      size: 19415476
